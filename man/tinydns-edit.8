.TH djbdnscurve6: tinydns-edit 8
.SH NAME
tinydns-edit \- edit the (source form of the) database served by tinydns/axfrdns
.SH SYNOPSIS
.B tinydns-edit
.I data
.I data.tmp
add
.I type
.I name
.I address
.SH DESCRIPTION
.B tinydns-edit
edits the
.I data
file, which is the source form of the database that is compiled by
.BR tinydns-data 
and that is served by
.BR tinydns
and
.BR axfrdns
The update to
.I data
is performed atomically, by first writing the updated database content to the file
.I data.tmp
and then renaming
.I data.tmp
to
.IR data .
The two files must, of course, reside on the same volume in order that this can be achieved.
.PP
On success,
.I tinydns-edit
returns zero. If, for any reason, an error occurs it will exit with a non-zero code and
.I data
will not be changed.
.PP
With the "add" verb, 
.I tinydns-edit
appends to the database a record whose type is determined by
.IR type ,
with the fully-qualified name
.I name
and the IP address
.IR address .
.PP
On input, an IPv4
.I address
is given in the standard decimal-dotted format, while an IPv6
.I address 
is expressed in the compactified format.
.SH "DATA TYPES"
The record types generated by
.I tinydns-edit
are indidcated via a token in the first column.
.I type
can be one of:
.IP ns
A '.' record is created.  This record specifies that the domain
.I name
is published by a DNS content server that is listening on the IPv4/IPv6
.IR address .
.IP
The name of the DNS content server is not directly specifiable.  
Names are automatically assigned by
.I tinydns-edit
itself, following the pattern
.IR [a-z].ns.name .
.I tinydns-edit
will assign the first letter of the alphabet that is not already used in another '.' or '&' 
record as the name of a DNS content server.
If no letters of the alphabet remain unused,
.I tinydns-edit
will fail.
.IP
If a '.' or '&' record for the domain already exists, 
proxy DNS servers are allowed to cache the new record for the same length of time 
as they are allowed to cache the existing records.
Otherwise, proxy DNS servers are allowed to cache the record for up to 3 days.
.IP childns
A '&' record is created.  This record specifies that queries for names in the domain
.I name
should be referred to a ("child") DNS content server that is listening on the IPv4/IPv6 
.IR address .
.IP
The name of the DNS content server is not directly specifiable.  
Names are automatically assigned by
.I tinydns-edit
itself, following the pattern
.IR [a-z].ns.name .
.I tinydns-edit
will assign the first letter of the alphabet that is not already used in another '.' or '&' 
record as the name of a DNS content server.
If no letters of the alphabet remain unused,
.I tinydns-edit
will fail.
.IP
If a '.' or '&' record for the domain already exists, proxy DNS servers are allowed 
to cache the new record for the same length of time as they are allowed to cache the existing records.
Otherwise, proxy DNS servers are allowed to cache the record for up to 3 days.
.IP mx
A '@' record is created.  This record specifies that mail to names in the domain
.I name
should be sent to an SMTP server that is listening on the IPv4/IPv6 
.IR address .
.IP
The name of the SMTP server is not directly specifiable.  
Names are automatically assigned by
.I tinydns-edit
itself, following the pattern
.IR [a-z].mx.name .
.I tinydns-edit
will assign the first letter of the alphabet that is not already used in another '@' 
record as the name of an SMTP server.
If no letters of the alphabet remain unused,
.I tinydns-edit
will fail.
.IP
It is not possible to specify the 
.I distance 
value for the SMTP server.  
.I tinydns-edit
will leave that field blank, meaning that 
.I tinydns-data
will use whatever the default value is.
.IP
If a '@' record for the domain already exists, proxy DNS servers are allowed 
to cache the new record for the same length of time as they are allowed to cache the existing records.
Otherwise, proxy DNS servers are allowed to cache the record for up to 1 day.
.IP host
A '=' record is created, that proxy DNS servers are allowed to cache for up to 1 day.  
This record specifies that 
.I name
maps to IPv4
.I address 
and vice versa.
.IP host6
A '~' record is created, that proxy DNS servers are allowed to cache for up to 1 day.
This record specifies that
.I name
maps to IPv6
.I address
and vice versa.
.IP
.I tinydns-edit
will fail if a '=' or '~' record already exists that uses either the same
.I name
or
.IR address .
.IP alias
A '+' record is created, that proxy DNS servers are allowed to cache for up to 1 day.  
This record specifies that 
.I name
maps to IPv4
.I address 
but that there is no reverse mapping.
.IP alias6
A '-' record is created, that proxy DNS servers are allowed to cache for up to 1 day.  
This record specifies that 
.I name
maps to IPv6
.I address
but that there is no reverse mapping.
.IP
Because these are alias records,
.I tinydns-edit
will not fail for distinct '+' or '-' entries pointing to the same
.IR address .
.SH "SEE ALSO"
axfrdns(8), 
tinydns(8), 
tinydns-data(8)   
.SH AUTHOR
This manual page was created by Jonathan de Boyne Pollard
including now IPv6 extensions.
.SH REFERENCE
http://cr.yp.to/djbdns.html
